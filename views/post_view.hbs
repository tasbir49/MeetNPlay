<!DOCTYPE html>
<html lang="en">
<head>
	<title>{{post.title}}</title>

	<meta charset="UTF-8">
	<meta name="author" content="">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="theme-color" content="#323741">
	<meta name="viewport" content="width=device-width">

	<link rel="icon" type="image/ico" href="../../resources/images/logo2.png">
	<link rel="stylesheet" href="/styles/main.css">
	<link rel="stylesheet" href="/styles/post-main.css">
	<link rel="stylesheet" href="/styles/user_header.css">
	<link rel="stylesheet" href="/styles/post-view.css">
	<link rel="stylesheet" href="/styles/post-invite.css">
</head>
<body>
    {{> header_partial }} 
				
	<section id="contents">
		<div id="threadContainer"><section id="thread">
			<section id="post">
				{{#if canEdit}}<div class="userSectionOptionsContainer modifyOptions"><div class="userSectionOptions modifyOptions">
					<svg class="userOptionsSVG modifyOptions" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z"/></svg>
					<ul class="userSectionOptionsList modifyOptions">
						<li><a class="edit" href="/post/edit/{{post._id}}">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.127 22.564l-7.126 1.436 1.438-7.125 5.688 5.689zm-4.274-7.104l5.688 5.689 15.46-15.46-5.689-5.689-15.459 15.46z"/></svg>
							Edit Post
						</a></li>
						<li><a class="delete deleteThread" href="#">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"/></svg>
							Delete Thread
						</a></li>
					</ul>
				</div></div>{{/if}}

				<h2 id="postTitle">{{post.title}}</h2>
                {{#each post.keywords}}
				<span class="keywordLabel">{{this}}</span>
                {{/each}}
				<hr>
				<div id="gameDetailsContainer"><section id="gameDetails">
					<div id="gameContainer"><section id="game" class="sectionCard">
						<div id="gameImgContainer"><img id="gameImg" src="{{post.gamePicUrl}}" alt="Rayman Origins box art"></div>
						<h2 id="gameTitle">{{post.gameTitle}}</h2>
                        {{#each post.gameGenres}}
						<span class="keywordLabel gameGenre">{{this}}</span>
                        {{/each}}                        
                        <br>Meeting on:<br>
                        <h3>{{post.date}}</h3>
                        at:
                        <h3><a href="https://www.google.com/maps/search/?api=1&query={{{postUrlLocation}}}">{{post.meetLocation}}</a></h3>
					</section></div>
					<div id="spaceAvailableContainer"><section id="spaceAvailable" class="sectionCard">
						<span id="spaceAvailableTitle">Space Available: </span><span id="spaceAvailableNum"></span><button id="requestInvite" value="{{post.playersNeeded}}"></button>
						
						<div class="spaceL">Invite requests</div>
						<div id="spaceAvailableSlots">
						</div>
						<div class="spaceL">Members</div>
						<div id="memberSlots">
						</div>
					</section></div>
				</section></div>
				<div id="postDetailsContainer"><section id="postDetails" class="sectionCard">
					<div id="postDetailsUser" class="sectionCard userSection">
						<img class="userProfilePic" src="{{post.creator.profilePicUrl}}" alt="userProfilePic1">
						<div id="postDetailsUserInfo" class="userSectionInfo">
							<h4 class="userName">{{post.creator.name}}</h4>
							<span class="postDetailsLabel">Posted: <i>{{post.dateMade}}</i></span>
						</div>
					</div>
					<div class="userSectionOptionsContainer"><div class="userSectionOptions">
						<svg class="userOptionsSVG" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z"/></svg>
						<ul class="userSectionOptionsList">
							<li><a href="../../Accounts/admin_viewing_poster.html">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm7.753 18.305c-.261-.586-.789-.991-1.871-1.241-2.293-.529-4.428-.993-3.393-2.945 3.145-5.942.833-9.119-2.489-9.119-3.388 0-5.644 3.299-2.489 9.119 1.066 1.964-1.148 2.427-3.393 2.945-1.084.25-1.608.658-1.867 1.246-1.405-1.723-2.251-3.919-2.251-6.31 0-5.514 4.486-10 10-10s10 4.486 10 10c0 2.389-.845 4.583-2.247 6.305z"/></svg>
								View Profile
							</a></li>
							<li><a class="report" href="#">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M4 24h-2v-24h2v24zm18-22h-16v12h16l-4-5.969 4-6.031z"/></svg>
								Report
							</a></li>
						</ul>
					</div></div>
					<div class="userMessage">
                    {{{post.details}}}
					</div>
				</section></div>
				<div class="clearFloat"></div>
			</section>
			
			<h2>Comments</h2>
			<hr>
			<br>
			<section id="commentFormContainer" class="curUser">
				Comment as <span class="userName">{{user.name}}</span>
				<form id="commentForm" action="">
					<textarea placeholder="Enter a comment" name="commentInput" id="commentInput"></textarea>
					<button id="commentFormSubmit">Add Comment</button>
				</form>
			</section>
            {{#each post.comments}}
			<section class="comment" id="{{this._id}}">
				<div class="sectionCard userSection">
					<img class="userProfilePic" src="{{this.user.profilePicUrl}}" alt="userProfilePic1">
					<div class="userSectionInfo">
						<h4 class="userName" ><a href="/users/{{this.user.name}}">{{this.user.name}}</a></h4>
						<span class="postDetailsLabel">Posted: <i>{{this.date}}</i></span>
						<span class="postDetailsLabel">Location: <i>{{this.user.city}}</i></span>
					</div>
				</div>
				<div class="userSectionOptionsContainer"><div class="userSectionOptions">
					<svg class="userOptionsSVG" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z"/></svg>
					<ul class="userSectionOptionsList">
						<li><a class="report" href="#">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M4 24h-2v-24h2v24zm18-22h-16v12h16l-4-5.969 4-6.031z"/></svg>
							Report
						</a></li>
                        
                        {{#if ../canEdit}}
						<li><a class="delete deleteComment" href="#">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"/></svg>
							Delete Comment
						</a></li>
                        {{/if}}
					</ul>
				</div></div>
				<div class="userMessage">
                    {{this.content}}
				</div>
			</section>
            {{/each}}
			
		</section></div>
	</section>

	<script>
		const inviteIDs = "{{post.inviteReqs}}".split(",");
		const memberIDs = "{{post.members}}".split(",");
		const postID = "{{post._id}}";
        const userName = "{{user.name}}";
        const userCity = "{{user.city}}";
        const userIsAdmin = {{user.isAdmin}};
        const creatorName = "{{post.creator.name}}";    
	</script>
	<script src="/js/post-main.js"></script>
	<script src="/js/post-view.js"></script>
	<script src="/js/post-invite.js"></script>
</body>
</html>